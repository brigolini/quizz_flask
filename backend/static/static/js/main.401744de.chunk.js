(this["webpackJsonptrivia-app"]=this["webpackJsonptrivia-app"]||[]).push([[0],{148:function(e,t,n){e.exports=n(207)},157:function(e,t,n){},203:function(e,t,n){},206:function(e,t,n){},207:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(16),s=n.n(c),i=n(8),l=n(13),u=n(3),o=n(18),m=n(211),p=n(9);n(157);function d(e){return e.isCorrect?r.a.createElement(m.b,{color:"green",size:20}):r.a.createElement(m.a,{color:"red",size:20})}function f(){var e=Object(p.c)((function(e){return e.trivia})),t=e.statistics,n=e.questions,c=e.answers,s=Object(a.useState)(0),l=Object(o.a)(s,2),u=l[0],m=l[1];if(!n||!t||!c)return null;var f=n[u].userAnswer||0;return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.Card,{elevation:3},r.a.createElement("div",{className:"divAnswer"},"Question: ",n[u].title),r.a.createElement("div",{className:"divAnswer"},"Your Answer: ",n[u].options[f]," ",r.a.createElement(d,{isCorrect:c[u].correct})),r.a.createElement("div",{className:"divAnswer"},r.a.createElement(i.Button,{onClick:function(){return m((function(e){return e+1}))},disabled:u>8},"Next")),r.a.createElement("div",{className:"divAnswer"},"See how other competitors answer the same question:"),r.a.createElement("div",{className:"divAnswer"},n[u].options.map((function(e,n){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("span",null,e),r.a.createElement("span",null,function(e){return 0===e?t[e].answers.alt1:1===e?t[e].answers.alt2:2===e?t[e].answers.alt3:3===e?t[e].answers.alt4:void 0}(n))))})))))}var v=n(17),E=n.n(v),h=n(29),b=function(e){return{type:"NEW_ERROR",payload:e}},g=n(93),O=n.n(g),w=function(e){var t={headers:{},baseURL:"http://localhost:5000"};e&&(t.headers.Authorization="JWT ".concat(e));var n=O.a.create(t);return n.interceptors.response.use((function(e){return e}),(function(e){if(e.response.status>399)throw new Error("Error Accessing API")})),n},j=n(37),y=n(94),I=n(38),x={questions:void 0,questionIndex:0,answers:void 0,statistics:void 0,begin:new Date},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_TRIVIA":return Object(I.a)({},e,{questions:t.payload,questionIndex:0});case"ANSWER_QUESTION":if(!e.questions)throw Error("There is no questions, should not answer it");if(e.questionIndex>=e.questions.length)throw Error("Can't answer question, trivia is over");var n=e.questions.slice();return n[e.questionIndex].userAnswer=t.payload,Object(I.a)({},e,{questionIndex:e.questionIndex+1,questions:n});case"RESET_TRIVIA":return e=Object(I.a)({},x);case"FETCH_TRIVIA_RESULTS":return Object(I.a)({},e,{answers:t.payload.correct_answers,statistics:t.payload.statistics});case"BEGIN_TRIVIA":return Object(I.a)({},e,{begin:new Date});default:return e}},k={message:null},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_ERROR":return e={message:t.payload};case"CLEAR_ERROR":return e=k;default:return e}},C={token:void 0,userId:void 0},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return{token:t.payload.token,userId:t.payload.userId};case"LOGOUT":return C;default:return e}},A=Object(j.c)({trivia:N,error:R,security:T}),q=Object(j.d)(A,{trivia:x,error:k,security:C},Object(j.a)(y.a)),S=function(){var e=Object(p.c)((function(e){return e.trivia})),t=e.answers,n=e.statistics,r=e.questions,c=e.begin,s=Object(a.useState)(),i=Object(o.a)(s,2),l=i[0],u=i[1],m=Object(a.useState)(),d=Object(o.a)(m,2),f=d[0],v=d[1],g=Object(a.useState)(),O=Object(o.a)(g,2),j=O[0],y=O[1],I=Object(a.useState)(),x=Object(o.a)(I,2),N=x[0],k=x[1],R=Object(p.b)();return Object(a.useEffect)((function(){if(!N){var e=((new Date).getTime()-c.getTime())/1e3;k(Math.abs(e))}}),[c,k,N]),Object(a.useEffect)((function(){r&&R(function(e){return function(){var t=Object(h.a)(E.a.mark((function t(n){var a,r,c,s,i,l,u;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=function(e){return{type:"FETCH_TRIVIA_RESULTS",payload:e}},r=q.getState().security,c=r.token,s=r.userId,t.prev=2,i=e.map((function(e){return{question_id:e.id,answer:e.userAnswer}})),l={answers:i},t.next=7,w(c).post("api/quizz/user/".concat(s),l);case 7:u=t.sent,n(a(u.data)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),n(b("We are not reaching our servers. Try again latter!"));case 14:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}()}(r))}),[r,R]),Object(a.useEffect)((function(){if(t){v(t.length);var e=t.filter((function(e){return e.correct})).length;u(e),e<3&&y("Clueless. Don\u2019t be discouraged! Learn some more about this topic,and come back to try again!"),e>=3&&e<=5&&y("Beginner. This is the level most players end up with after answering this quiz for the first time. Learn some more about this topic and come back to try again!"),e>5&&e<=8&&y("Confident: This is the level players are getting pro! Continue your progress and rock it!"),e>8&&e<=10&&y("Expert: This is the highest level achievable! Thanks for being awesome as you are!")}}),[t,u,v]),{answers:t,statistics:n,totalCorrect:l,total:f,phrase:j,timeToComplete:N}};function _(e){var t=S(),n=t.totalCorrect,a=t.total,c=t.phrase,s=t.timeToComplete,o=Object(p.c)((function(e){return e.trivia})),m=Object(u.f)(),d=Object(p.b)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header"},s&&n&&a?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("p",null,"You scored ".concat(n," of ").concat(a)))),r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("p",null,"It takes you ".concat(s," seconds to finish the quizz.")))),r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("p",null,c)))):null),r.a.createElement("div",{className:"main-area"},o.questions?r.a.createElement(f,null):null),r.a.createElement("div",{className:"footer"},r.a.createElement("div",{className:"center"},r.a.createElement(i.Button,{intent:l.a.PRIMARY,text:"Play Again?",onClick:function(){d({type:"RESET_TRIVIA"}),m.push("/")}}))))}var U=n(61),F=function(e,t){return{type:"LOGIN",payload:{token:e,userId:t}}},L=function(e){return function(){var t=Object(h.a)(E.a.mark((function t(n){var a,r,c;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w().post("/auth",e);case 2:a=t.sent,r=a.data.access_token,c=Object(U.a)(r),n(F(r,c.user_id));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},W=function(e){return function(){var t=Object(h.a)(E.a.mark((function t(n){var a,r,c;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w().post("/api/users",e);case 3:return t.next=5,w().post("/auth",e);case 5:a=t.sent,r=a.data.access_token,c=Object(U.a)(r),n(F(r,c.user_id)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),409===t.t0.status?n(b("This user already exists.")):n(b("We are having problems to access our servers, please try again latter"));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()};function B(){var e=Object(u.f)(),t=Object(p.c)((function(e){return e.trivia})),n=Object(p.b)();return t.questions||n(function(){var e=Object(h.a)(E.a.mark((function e(t){var n,a,r,c,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){return e.data.quizz_questions.map((function(e){return{id:e.id,title:e.title,options:[e.alt1,e.alt2,e.alt3,e.alt4],userAnswer:void 0}}))},a=function(e){return{type:"FETCH_TRIVIA",payload:e}},r=q.getState().security.token,e.prev=3,e.next=6,w(r).get("/api/quizz/10");case 6:c=e.sent,s=n(c),t(a(s)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),t(b("We are not reaching our servers. Try again latter!"));case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}()),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"center-text"},r.a.createElement("h1",null,"Welcome to the Trivia Challenge!"))),r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"center"},r.a.createElement(i.Button,{fill:!0,intent:l.a.PRIMARY,onClick:function(){n({type:"BEGIN_TRIVIA"}),e.push("/trivia")}},"Begin ",t.questions?null:r.a.createElement("span",{className:"loading"})),r.a.createElement(i.Button,{fill:!0,intent:l.a.DANGER,onClick:function(){n({type:"LOGOUT"})}},"Logout"))))}var z=n(95),G=function(e){return r.a.createElement("span",{style:{fontWeight:e.fontType}},e.children)};function V(e){var t=e.options,n=e.handleFinish,c=e.question,s=new z.AllHtmlEntities,u=Object(a.useState)(0),m=Object(o.a)(u,2),p=m[0],d=m[1];return Object(a.useEffect)((function(){d(0)}),[c]),c?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.Card,{elevation:3,style:{width:"100%"}},r.a.createElement("p",null,r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(G,{fontType:"bold"},s.decode(c.title))),r.a.createElement("div",null,r.a.createElement(i.RadioGroup,{onChange:function(e){d(parseInt(e.target.value))},selectedValue:p},t.map((function(e,t){return r.a.createElement(i.Radio,{label:e,value:t})})))),r.a.createElement("div",{className:"footer"},r.a.createElement("span",{className:"center"},r.a.createElement(i.Button,{intent:l.a.SUCCESS,text:"Ok",onClick:function(){return n(p)}}))))))):null}function P(e){var t=function(){var e=Object(p.c)((function(e){return e.trivia})),t=Object(p.b)(),n=e.questions,a=e.questionIndex;return{question:n?n[a]:null,current:a,total:n?n.length:0,isFinished:!!n&&a===n.length,answerQuestion:function(a){n&&e.questionIndex<n.length&&t(function(e){return{type:"ANSWER_QUESTION",payload:e}}(a))}}}(),n=t.question,a=t.current,c=t.total,s=t.answerQuestion,i=t.isFinished,l=Object(u.f)();return i?(l.push("/result"),null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"main-area"},r.a.createElement(V,{question:n,options:n?n.options:[],handleFinish:s}),r.a.createElement("span",{className:"center-text"},r.a.createElement("h3",null,"".concat(a+1," of ").concat(c)))))}var D=n(96);function M(){var e=Object(p.c)((function(e){return e.error})),t=Object(p.b)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.Dialog,{isOpen:null!==e.message,title:"We apologize",icon:"warning-sign"},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("p",null,"We are experiencing some trouble in our server. We shold be back soon...")),r.a.createElement("div",{style:{margin:"auto"}},r.a.createElement(i.Button,{text:"Ok",intent:l.a.PRIMARY,onClick:function(){console.info(e.message),t({type:"CLEAR_ERROR"})}}))))}n(203);var Y=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(""),m=Object(o.a)(s,2),d=m[0],f=m[1],v=Object(a.useState)(""),b=Object(o.a)(v,2),g=b[0],O=b[1],w=function(){var e=Object(p.b)(),t=Object(a.useState)(!1),n=Object(o.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(!1),i=Object(o.a)(s,2),l=i[0],u=i[1];return{isLoading:r,error:l,loginUser:function(){var t=Object(h.a)(E.a.mark((function t(n,a){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&a){t.next=3;break}return u(!0),t.abrupt("return");case 3:return c(!0),t.prev=4,t.next=7,e(L({username:n,password:a}));case 7:c(!1),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(4),c(!1),u(!0);case 14:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e,n){return t.apply(this,arguments)}}(),signUpUser:function(){var t=Object(h.a)(E.a.mark((function t(n,a){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c(!0),n&&a){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,e(W({username:n,password:a}));case 6:c(!1),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(3),c(!1),u(!0);case 13:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,n){return t.apply(this,arguments)}}(),logOutUser:function(){var t=Object(h.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({type:"LOGOUT"});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}}(),j=w.isLoading,y=w.loginUser,I=w.signUpUser,x=w.error,N=Object(u.f)(),k=r.a.createElement(i.Button,{icon:n?"unlock":"lock",intent:l.a.WARNING,minimal:!0,onClick:function(){return c((function(e){return!e}))}});return r.a.createElement("div",{className:"center"},r.a.createElement(i.Card,{elevation:2,className:"login"},r.a.createElement("div",{className:"text"},r.a.createElement("h1",null,"Welcome to Trivia")),r.a.createElement("div",{className:"text"},r.a.createElement("h1",null,"Please login")),r.a.createElement("div",null,r.a.createElement(i.Label,null,"Username:",r.a.createElement(i.InputGroup,{value:d,onChange:function(e){f(e.target.value)},small:!0,placeholder:"Username..."}))),r.a.createElement("div",null,r.a.createElement(i.Label,null,"Password",r.a.createElement(i.InputGroup,{small:!0,value:g,onChange:function(e){O(e.target.value)},placeholder:"Username...",rightElement:k,type:n?"text":"password"}))),x?r.a.createElement("div",{className:"error"},"Invalid information. Maybe signup?"):null,r.a.createElement("div",null,r.a.createElement(i.Button,{intent:l.a.PRIMARY,onClick:function(){N.push("/"),y(d,g)},fill:!0},"Log In",j&&r.a.createElement("span",{className:"loading"}))),r.a.createElement("div",null,r.a.createElement(i.Button,{intent:l.a.WARNING,onClick:function(){N.push("/"),I(d,g)},fill:!0},"Create New User",j&&r.a.createElement("span",{className:"loading"})))))};var H=function(){var e=Object(p.c)((function(e){return e.security})).token;return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,null,e?r.a.createElement("div",{className:"screenContainer"},r.a.createElement("div",{className:"app"},r.a.createElement(i.Card,{className:"appConteiner",elevation:2},r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/",exact:!0,component:B}),r.a.createElement(u.a,{path:"/trivia",exact:!0,component:P}),r.a.createElement(u.a,{path:"/result",exact:!0,component:_}))))):r.a.createElement(Y,null)),r.a.createElement(M,null))};n(204),n(205),n(206);s.a.render(r.a.createElement(p.a,{store:q},r.a.createElement(H,null)),document.getElementById("root"))}},[[148,1,2]]]);
//# sourceMappingURL=main.401744de.chunk.js.map